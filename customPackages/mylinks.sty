% mylinks.sty - Minimal helper for creating anchors and links
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mylinks}[2025/10/19 Minimal anchor and link helpers]

\RequirePackage{makeidx}

% Enable indexing
\makeindex

% Helper to remove spaces (for MakeAnchor)
\makeatletter
\def\stripspaces#1{\zap@space#1 \@empty}
\makeatother

% MakeAnchor: create a label with normalized name
\newcommand{\MakeAnchor}[1]{%
  \edef\tempa{\detokenize{#1}}%
  \edef\anchorname{\expandafter\stripspaces\tempa}% 
  \label{\anchorname}%
  \index{#1}#1%
}

% MakeSkillAnchor: create a label with normalized name (Skill category)
\newcommand{\MakeSkillAnchor}[1]{%
  \edef\tempa{\detokenize{#1}}%
  \edef\anchorname{\expandafter\stripspaces\tempa}%
  \label{\anchorname}%
  \index{Skill!#1}#1%
}

% MakeLink: display text, link to page of the anchor
\newcommand{\MakeLink}[1]{%
  #1 (P.\pageref{\expandafter\stripspaces\detokenize{#1}})\index{#1}%
}

% MakeSkillLink: display text, link to page of the anchor (Skill category)
\newcommand{\MakeSkillLink}[1]{%
  #1 (P.\pageref{\expandafter\stripspaces\detokenize{#1}})\index{Skill!#1}%
}

% MakeSkillLink: display text, link to page of the anchor (Perk category)
\newcommand{\MakePerkLink}[1]{%
  #1 (P.\pageref{\expandafter\stripspaces\detokenize{#1}})\index{Perk!#1}%
}

% MakeSkillLink: display text, link to page of the anchor (Flaw category)
\newcommand{\MakeFlawLink}[1]{%
  #1 (P.\pageref{\expandafter\stripspaces\detokenize{#1}})\index{Flaw!#1}%
}